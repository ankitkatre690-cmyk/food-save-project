<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FoodSave - Reduce Waste, Feed Communities</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        /* Enhanced CSS with new features */
        :root {
            --primary: #2e7d32;
            --primary-dark: #1b5e20;
            --primary-light: #4caf50;
            --secondary: #ff9800;
            --secondary-dark: #f57c00;
            --accent: #2196f3;
            --danger: #f44336;
            --warning: #ffc107;
            --success: #4caf50;
            --text: #263238;
            --text-light: #546e7a;
            --bg: #f8f9fa;
            --bg-card: #ffffff;
            --border: #e0e0e0;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
            --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.1);
            --radius: 12px;
        }

        .dark-mode {
            --primary: #4caf50;
            --primary-dark: #388e3c;
            --primary-light: #81c784;
            --text: #eceff1;
            --text-light: #b0bec5;
            --bg: #121212;
            --bg-card: #1e1e1e;
            --border: #333333;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
            --shadow-lg: 0 10px 25px rgba(0, 0, 0, 0.4);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        body {
            background-color: var(--bg);
            color: var(--text);
            line-height: 1.6;
            transition: all 0.3s ease;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Skip link for accessibility */
        .skip-link {
            position: absolute;
            top: -40px;
            left: 6px;
            background: var(--primary);
            color: white;
            padding: 8px;
            border-radius: 4px;
            text-decoration: none;
            z-index: 10000;
            transition: top 0.3s;
        }

        .skip-link:focus {
            top: 6px;
        }

        /* Header & Navigation */
        header {
            background-color: var(--primary);
            color: white;
            padding: 15px 0;
            box-shadow: var(--shadow);
            position: sticky;
            top: 0;
            z-index: 1000;
            backdrop-filter: blur(10px);
        }

        .header-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-container {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 10px;
        }

        nav ul li a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s;
        }

        nav ul li a:hover, nav ul li a.active {
            background-color: rgba(255, 255, 255, 0.15);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .auth-buttons {
            display: flex;
            gap: 10px;
        }

        .theme-toggle {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            font-size: 1.2rem;
            padding: 8px;
            border-radius: 50%;
            transition: background-color 0.3s;
        }

        .theme-toggle:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        /* Search and Filter */
        .search-filter-container {
            display: flex;
            gap: 15px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .search-box {
            flex: 1;
            min-width: 250px;
            position: relative;
        }

        .search-box input {
            width: 100%;
            padding: 12px 16px 12px 40px;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            font-size: 1rem;
            background: var(--bg-card);
            color: var(--text);
            transition: border-color 0.3s;
        }

        .search-box i {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--text-light);
        }

        .filter-dropdown {
            position: relative;
            min-width: 180px;
        }

        .filter-dropdown select {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border);
            border-radius: var(--radius);
            font-size: 1rem;
            background: var(--bg-card);
            color: var(--text);
            appearance: none;
            cursor: pointer;
        }

        .filter-dropdown i {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
            color: var(--text-light);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(135deg, var(--primary) 0%, var(--primary-dark) 100%);
            color: white;
            padding: 100px 0;
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 100" fill="%23ffffff" opacity="0.05"><polygon points="1000,100 1000,0 0,100"/></svg>');
            background-size: cover;
        }

        .hero-content {
            position: relative;
            z-index: 1;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 15px;
            font-weight: 700;
        }

        .hero h2 {
            font-size: 1.8rem;
            font-weight: 400;
            margin-bottom: 30px;
            opacity: 0.9;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 40px;
            opacity: 0.9;
        }

        .stats {
            display: flex;
            justify-content: center;
            gap: 50px;
            flex-wrap: wrap;
            margin-top: 60px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-number {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .stat-label {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        /* Buttons */
        .btn {
            padding: 14px 32px;
            border-radius: 8px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            border: none;
            outline: none;
        }

        .btn-primary {
            background-color: var(--secondary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--secondary-dark);
            transform: translateY(-2px);
            box-shadow: var(--shadow-lg);
        }

        .btn-secondary {
            background-color: transparent;
            color: white;
            border: 2px solid white;
        }

        .btn-secondary:hover {
            background-color: white;
            color: var(--primary);
        }

        .btn-success {
            background-color: var(--success);
            color: white;
        }

        .btn-danger {
            background-color: var(--danger);
            color: white;
        }

        .btn-outline {
            background-color: transparent;
            color: var(--primary);
            border: 2px solid var(--primary);
        }

        .btn-outline:hover {
            background-color: var(--primary);
            color: white;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        /* Cards & Sections */
        .page-section {
            padding: 80px 0;
            display: none;
        }

        .page-section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        .section-title {
            text-align: center;
            margin-bottom: 50px;
            color: var(--primary);
            font-size: 2.5rem;
            font-weight: 700;
        }

        .section-subtitle {
            text-align: center;
            margin-bottom: 50px;
            color: var(--text-light);
            font-size: 1.2rem;
            max-width: 700px;
            margin-left: auto;
            margin-right: auto;
        }

        .dashboard {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }

        .dashboard-card {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 30px;
            box-shadow: var(--shadow);
            transition: transform 0.3s, box-shadow 0.3s;
            border: 1px solid var(--border);
        }

        .dashboard-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
        }

        .dashboard-card h3 {
            margin-bottom: 20px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.3rem;
        }

        /* Listings */
        .listing-item, .request-item {
            background: var(--bg-card);
            border-radius: var(--radius);
            padding: 25px;
            margin-bottom: 20px;
            box-shadow: var(--shadow);
            border-left: 4px solid var(--primary);
            transition: transform 0.3s, box-shadow 0.3s;
        }

        .listing-item:hover, .request-item:hover {
            transform: translateY(-3px);
            box-shadow: var(--shadow-lg);
        }

        .listing-header, .request-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
            gap: 15px;
        }

        .listing-title, .request-title {
            font-weight: 600;
            color: var(--primary);
            font-size: 1.2rem;
        }

        .listing-status, .request-status {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            white-space: nowrap;
        }

        .status-available { background: #e8f5e9; color: #2e7d32; }
        .status-reserved { background: #fff3e0; color: #ef6c00; }
        .status-completed { background: #f5f5f5; color: #757575; }
        .status-urgent { background: #ffebee; color: #c62828; }
        .status-open { background: #e3f2fd; color: #1565c0; }
        .status-claimed { background: #fff8e1; color: #ff8f00; }
        .status-pending { background: #f3e5f5; color: #7b1fa2; }

        .listing-details, .request-details {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-top: 15px;
            font-size: 0.95rem;
        }

        .detail-item {
            display: flex;
            align-items: center;
            gap: 8px;
            color: var(--text-light);
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
            flex-wrap: wrap;
        }

        /* Modals */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background-color: var(--bg-card);
            padding: 40px;
            border-radius: 16px;
            width: 90%;
            max-width: 500px;
            box-shadow: var(--shadow-lg);
            max-height: 90vh;
            overflow-y: auto;
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        .modal h2 {
            margin-bottom: 25px;
            color: var(--primary);
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.5rem;
        }

        .form-group {
            margin-bottom: 25px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--text);
        }

        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border);
            border-radius: 8px;
            font-size: 1rem;
            background: var(--bg-card);
            color: var(--text);
            transition: border-color 0.3s;
        }

        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(46, 125, 50, 0.1);
        }

        .form-group textarea {
            height: 120px;
            resize: vertical;
        }

        .modal-buttons {
            display: flex;
            justify-content: flex-end;
            gap: 15px;
            margin-top: 30px;
        }

        .btn-cancel {
            background-color: var(--bg-card);
            color: var(--text);
            border: 1px solid var(--border);
        }

        .btn-cancel:hover {
            background-color: var(--border);
        }

        /* Notifications */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 16px 24px;
            background-color: var(--success);
            color: white;
            border-radius: 8px;
            box-shadow: var(--shadow-lg);
            z-index: 2100;
            display: none;
            align-items: center;
            gap: 10px;
            animation: slideInRight 0.3s ease;
        }

        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }

        .notification.error {
            background-color: var(--danger);
        }

        .notification.warning {
            background-color: var(--warning);
            color: var(--text);
        }

        .notification.info {
            background-color: var(--accent);
        }

        /* Tabs */
        .tabs {
            display: flex;
            margin-bottom: 25px;
            border-bottom: 1px solid var(--border);
        }

        .tab {
            padding: 12px 24px;
            cursor: pointer;
            font-weight: 500;
            color: var(--text-light);
            transition: all 0.3s;
            border-bottom: 3px solid transparent;
        }

        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        /* Empty States */
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--text-light);
        }

        .empty-state i {
            font-size: 4rem;
            margin-bottom: 20px;
            color: var(--border);
        }

        .empty-state h3 {
            margin-bottom: 15px;
            color: var(--text-light);
        }

        /* Impact Stats */
        .impact-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .impact-stat {
            text-align: center;
            padding: 20px;
            background: var(--bg-card);
            border-radius: var(--radius);
            box-shadow: var(--shadow);
        }

        .impact-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 8px;
        }

        .impact-label {
            font-size: 0.9rem;
            color: var(--text-light);
        }

        /* Role Badges */
        .role-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: 10px;
        }

        .badge-donor { background: #e8f5e9; color: #2e7d32; }
        .badge-receiver { background: #e3f2fd; color: #1565c0; }
        .badge-volunteer { background: #fff3e0; color: #ef6c00; }

        /* Footer */
        footer {
            background-color: var(--primary-dark);
            color: white;
            padding: 60px 0 30px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            margin-bottom: 40px;
        }

        .footer-section h3 {
            margin-bottom: 20px;
            font-size: 1.3rem;
        }

        .footer-section ul {
            list-style: none;
        }

        .footer-section ul li {
            margin-bottom: 12px;
        }

        .footer-section ul li a {
            color: #c8e6c9;
            text-decoration: none;
            transition: color 0.3s;
        }

        .footer-section ul li a:hover {
            color: white;
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        .social-links a {
            color: white;
            font-size: 1.2rem;
            transition: color 0.3s;
        }

        .social-links a:hover {
            color: var(--secondary);
        }

        .copyright {
            padding-top: 30px;
            border-top: 1px solid rgba(255,255,255,0.1);
            text-align: center;
            color: rgba(255,255,255,0.7);
        }

        /* Loading States */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #fff;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Notification Badge */
        .notification-badge {
            background-color: var(--danger);
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            position: absolute;
            top: -5px;
            right: -5px;
        }

        .notification-icon {
            position: relative;
        }

        /* Password strength indicator */
        .password-strength {
            height: 5px;
            margin-top: 8px;
            border-radius: 5px;
            transition: all 0.3s;
        }

        .password-weak { background-color: var(--danger); width: 25%; }
        .password-medium { background-color: var(--warning); width: 50%; }
        .password-strong { background-color: var(--success); width: 100%; }

        /* Map container */
        .map-container {
            height: 200px;
            background: var(--border);
            border-radius: var(--radius);
            margin-top: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--text-light);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }

            nav ul {
                flex-wrap: wrap;
                justify-content: center;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .hero h2 {
                font-size: 1.4rem;
            }

            .stats {
                gap: 30px;
            }

            .stat-number {
                font-size: 2.5rem;
            }

            .section-title {
                font-size: 2rem;
            }

            .listing-header, .request-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }

            .modal-content {
                padding: 30px 20px;
            }

            .search-filter-container {
                flex-direction: column;
            }
        }

        /* Dark mode adjustments */
        .dark-mode .status-available { background: #1b5e20; color: #a5d6a7; }
        .dark-mode .status-reserved { background: #e65100; color: #ffcc80; }
        .dark-mode .status-completed { background: #424242; color: #bdbdbd; }
        .dark-mode .status-urgent { background: #c62828; color: #ffcdd2; }
        .dark-mode .status-open { background: #0d47a1; color: #90caf9; }
        .dark-mode .status-claimed { background: #ff6f00; color: #ffe0b2; }
        .dark-mode .status-pending { background: #4a148c; color: #e1bee7; }

        .dark-mode .badge-donor { background: #1b5e20; color: #a5d6a7; }
        .dark-mode .badge-receiver { background: #0d47a1; color: #90caf9; }
        .dark-mode .badge-volunteer { background: #e65100; color: #ffcc80; }
    </style>
</head>
<body>
    <!-- Skip link for accessibility -->
    <a href="#main-content" class="skip-link">Skip to main content</a>

    <!-- Header -->
    <header>
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-leaf"></i>
                    <span>FoodSave</span>
                </div>
                <div class="nav-container">
                    <nav aria-label="Main navigation">
                        <ul role="menubar">
                            <li role="none">
                                <a href="#" class="nav-link active" data-page="home" role="menuitem" aria-current="page">
                                    <i class="fas fa-home" aria-hidden="true"></i>
                                    <span>Home</span>
                                </a>
                            </li>
                            <li role="none">
                                <a href="#" class="nav-link" data-page="donations" role="menuitem">
                                    <i class="fas fa-utensils" aria-hidden="true"></i>
                                    <span>Donations</span>
                                </a>
                            </li>
                            <li role="none">
                                <a href="#" class="nav-link" data-page="requests" role="menuitem">
                                    <i class="fas fa-hands-helping" aria-hidden="true"></i>
                                    <span>Requests</span>
                                </a>
                            </li>
                            <li role="none">
                                <a href="#" class="nav-link" data-page="dashboard" role="menuitem">
                                    <i class="fas fa-tachometer-alt" aria-hidden="true"></i>
                                    <span>Dashboard</span>
                                </a>
                            </li>
                        </ul>
                    </nav>
                    <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
                        <i class="fas fa-moon"></i>
                    </button>
                    <div class="user-info">
                        <span id="userWelcome">Welcome! Please log in</span>
                        <div class="auth-buttons" id="authButtons">
                            <button id="loginBtn" class="btn btn-secondary btn-small">Log In</button>
                            <button id="registerBtn" class="btn btn-primary btn-small">Sign Up</button>
                        </div>
                        <div id="userActions" style="display: none;">
                            <div class="notification-icon" id="notificationIcon" style="display: none;">
                                <i class="fas fa-bell"></i>
                                <span class="notification-badge" id="notificationCount">0</span>
                            </div>
                            <button id="logoutBtn" class="btn btn-secondary btn-small">Log Out</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Home Page -->
    <section id="home" class="page-section active" aria-labelledby="home-title">
        <div class="hero">
            <div class="container">
                <div class="hero-content">
                    <h1 id="home-title">Reduce Food Waste</h1>
                    <h2>Nourish Communities</h2>
                    <p>Connecting food donors with organizations to redistribute surplus food and combat hunger in your community.</p>
                    
                    <div class="cta-buttons">
                        <button id="getStartedBtn" class="btn btn-primary">Get Started</button>
                        <button id="learnMoreBtn" class="btn btn-secondary">Learn More</button>
                    </div>
                    
                    <div class="stats">
                        <div class="stat-item">
                            <div class="stat-number" id="mealsSaved">20+</div>
                            <div class="stat-label">Meals Saved</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="activePartners">4+</div>
                            <div class="stat-label">Active Partners</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number" id="citiesReached">1+</div>
                            <div class="stat-label">Cities Reached</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="container" id="main-content">
            <h2 class="section-title">How FoodSave Works</h2>
            <p class="section-subtitle">A simple three-step process to connect surplus food with those who need it most</p>
            
            <div class="dashboard">
                <div class="dashboard-card">
                    <h3><i class="fas fa-utensils"></i> List Surplus Food</h3>
                    <p>Restaurants, grocery stores, and caterers can easily list their surplus food with details about quantity, type, and pickup time.</p>
                    <ul>
                        <li>Reduce food waste and disposal costs</li>
                        <li>Support your local community</li>
                        <li>Receive tax benefits for donations</li>
                    </ul>
                </div>
                
                <div class="dashboard-card">
                    <h3><i class="fas fa-hands-helping"></i> Request Donations</h3>
                    <p>Charities and community organizations can request food donations for their programs and beneficiaries.</p>
                    <ul>
                        <li>Access nutritious food for your programs</li>
                        <li>Support vulnerable communities</li>
                        <li>Reduce operational costs</li>
                    </ul>
                </div>
                
                <div class="dashboard-card">
                    <h3><i class="fas fa-users"></i> Coordinate Delivery</h3>
                    <p>Volunteers help transport food from donors to organizations, ensuring timely delivery.</p>
                    <ul>
                        <li>Make a direct impact in your community</li>
                        <li>Flexible volunteering opportunities</li>
                        <li>Connect with like-minded people</li>
                    </ul>
                </div>
            </div>
        </div>
    </section>

    <!-- Donations Page -->
    <section id="donations" class="page-section" aria-labelledby="donations-title">
        <div class="container">
            <h2 class="section-title" id="donations-title">Available Food Donations</h2>
            <p class="section-subtitle">Browse and claim available food donations from our verified partners</p>
            
            <div class="search-filter-container">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="donationSearch" placeholder="Search donations...">
                </div>
                <div class="filter-dropdown">
                    <i class="fas fa-filter"></i>
                    <select id="donationFilter">
                        <option value="all">All Categories</option>
                        <option value="prepared">Prepared Meals</option>
                        <option value="produce">Fresh Produce</option>
                        <option value="bakery">Bakery Items</option>
                        <option value="dairy">Dairy Products</option>
                        <option value="protein">Protein Sources</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="filter-dropdown">
                    <i class="fas fa-sort"></i>
                    <select id="donationSort">
                        <option value="newest">Newest First</option>
                        <option value="oldest">Oldest First</option>
                        <option value="quantity">Most Servings</option>
                        <option value="expiry">Expiring Soon</option>
                    </select>
                </div>
            </div>
            
            <div class="action-buttons" style="justify-content: center; margin-bottom: 40px;">
                <button id="addDonationBtn" class="btn btn-primary"><i class="fas fa-plus"></i> Add New Donation</button>
            </div>
            
            <div class="food-listings" id="donationsList">
                <!-- Dynamic content -->
            </div>
        </div>
    </section>

    <!-- Requests Page -->
    <section id="requests" class="page-section" aria-labelledby="requests-title">
        <div class="container">
            <h2 class="section-title" id="requests-title">Donation Requests</h2>
            <p class="section-subtitle">Browse requests from NGOs and community organizations</p>
            
            <div class="search-filter-container">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="requestSearch" placeholder="Search requests...">
                </div>
                <div class="filter-dropdown">
                    <i class="fas fa-filter"></i>
                    <select id="requestFilter">
                        <option value="all">All Categories</option>
                        <option value="prepared">Prepared Meals</option>
                        <option value="produce">Fresh Produce</option>
                        <option value="bakery">Bakery Items</option>
                        <option value="dairy">Dairy Products</option>
                        <option value="protein">Protein Sources</option>
                        <option value="any">Any Category</option>
                    </select>
                </div>
                <div class="filter-dropdown">
                    <i class="fas fa-sort"></i>
                    <select id="requestSort">
                        <option value="newest">Newest First</option>
                        <option value="oldest">Oldest First</option>
                        <option value="urgency">Most Urgent</option>
                        <option value="quantity">Most Servings</option>
                    </select>
                </div>
            </div>
            
            <div class="action-buttons" style="justify-content: center; margin-bottom: 40px;">
                <button id="addRequestBtn" class="btn btn-primary"><i class="fas fa-plus"></i> Create New Request</button>
            </div>
            
            <div class="donation-requests" id="requestsList">
                <!-- Dynamic content -->
            </div>
        </div>
    </section>

    <!-- Dashboard Page -->
    <section id="dashboard" class="page-section" aria-labelledby="dashboard-title">
        <div class="container">
            <h2 class="section-title" id="dashboard-title">My Dashboard</h2>
            
            <div class="dashboard">
                <div class="dashboard-card">
                    <h3><i class="fas fa-user"></i> Profile Information</h3>
                    <div id="userProfile">
                        <!-- Dynamic content -->
                    </div>
                </div>
                
                <div class="dashboard-card">
                    <h3><i class="fas fa-chart-line"></i> My Impact</h3>
                    <div class="impact-stats">
                        <div class="impact-stat">
                            <div class="impact-number" id="userDonationsCount">0</div>
                            <div class="impact-label">Donations Made</div>
                        </div>
                        <div class="impact-stat">
                            <div class="impact-number" id="userRequestsCount">0</div>
                            <div class="impact-label">Requests Made</div>
                        </div>
                        <div class="impact-stat">
                            <div class="impact-number" id="userMealsCount">0</div>
                            <div class="impact-label">Meals Provided</div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="dashboard" style="margin-top: 40px;">
                <div class="dashboard-card">
                    <h3><i class="fas fa-utensils"></i> My Donations</h3>
                    <div class="user-donations" id="userDonationsList">
                        <!-- Dynamic content -->
                    </div>
                </div>
                
                <div class="dashboard-card">
                    <h3><i class="fas fa-hands-helping"></i> My Requests</h3>
                    <div class="user-requests" id="userRequestsList">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </div>

            <!-- Notifications Section for Volunteers -->
            <div class="dashboard" style="margin-top: 40px;" id="volunteerNotificationsSection">
                <div class="dashboard-card">
                    <h3><i class="fas fa-bell"></i> Volunteer Notifications</h3>
                    <div class="volunteer-notifications" id="volunteerNotificationsList">
                        <!-- Dynamic content -->
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Modals -->
    <div id="authModal" class="modal">
        <div class="modal-content">
            <div class="tabs">
                <div class="tab active" data-tab="login">Log In</div>
                <div class="tab" data-tab="register">Sign Up</div>
            </div>
            
            <div class="tab-content active" id="loginTab">
                <h2><i class="fas fa-sign-in-alt"></i> Welcome Back</h2>
                <form id="loginForm">
                    <div class="form-group">
                        <label for="loginEmail">Email Address</label>
                        <input type="email" id="loginEmail" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label for="loginPassword">Password</label>
                        <input type="password" id="loginPassword" placeholder="Enter your password" required>
                    </div>
                    <div class="modal-buttons">
                        <button type="button" id="cancelAuthBtn" class="btn btn-cancel">Cancel</button>
                        <button type="submit" class="btn btn-primary">Log In</button>
                    </div>
                </form>
            </div>
            
            <div class="tab-content" id="registerTab">
                <h2><i class="fas fa-user-plus"></i> Join FoodSave</h2>
                <form id="registerForm">
                    <div class="form-group">
                        <label for="registerName">Full Name</label>
                        <input type="text" id="registerName" placeholder="Enter your full name" required>
                    </div>
                    <div class="form-group">
                        <label for="registerEmail">Email Address</label>
                        <input type="email" id="registerEmail" placeholder="Enter your email" required>
                    </div>
                    <div class="form-group">
                        <label for="registerPassword">Password</label>
                        <input type="password" id="registerPassword" placeholder="Create a password" required minlength="6">
                        <div class="password-strength" id="passwordStrength"></div>
                    </div>
                    <div class="form-group">
                        <label for="registerRole">I am a:</label>
                        <select id="registerRole" required>
                            <option value="">Select your role</option>
                            <option value="donor">Food Donor (Restaurant, Grocery, etc.)</option>
                            <option value="receiver">NGO/Community Organization</option>
                            <option value="volunteer">Volunteer</option>
                        </select>
                    </div>
                    <div class="modal-buttons">
                        <button type="button" id="cancelRegisterBtn" class="btn btn-cancel">Cancel</button>
                        <button type="submit" class="btn btn-primary">Create Account</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Donation Modal -->
    <div id="donationModal" class="modal">
        <div class="modal-content">
            <h2><i class="fas fa-utensils"></i> Add Food Donation</h2>
            <form id="donationForm">
                <div class="form-group">
                    <label for="donationTitle">Food Item/Description</label>
                    <input type="text" id="donationTitle" placeholder="e.g., Fresh bread and pastries" required>
                </div>
                <div class="form-group">
                    <label for="donationDescription">Details</label>
                    <textarea id="donationDescription" placeholder="Describe the food items, quantity, packaging, etc." required></textarea>
                </div>
                <div class="form-group">
                    <label for="donationQuantity">Quantity (approx. servings)</label>
                    <input type="number" id="donationQuantity" min="1" placeholder="e.g., 25" required>
                </div>
                <div class="form-group">
                    <label for="donationCategory">Food Category</label>
                    <select id="donationCategory" required>
                        <option value="">Select category</option>
                        <option value="prepared">Prepared Meals</option>
                        <option value="produce">Fresh Produce</option>
                        <option value="bakery">Bakery Items</option>
                        <option value="dairy">Dairy Products</option>
                        <option value="protein">Protein Sources</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="donationExpiry">Best Before</label>
                    <input type="datetime-local" id="donationExpiry" required>
                </div>
                <div class="form-group">
                    <label for="donationLocation">Pickup Location</label>
                    <input type="text" id="donationLocation" placeholder="Full address for pickup" required>
                    <div class="map-container">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>Map preview would appear here</span>
                    </div>
                </div>
                <div class="modal-buttons">
                    <button type="button" id="cancelDonationBtn" class="btn btn-cancel">Cancel</button>
                    <button type="submit" class="btn btn-primary">Add Donation</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Request Modal -->
    <div id="requestModal" class="modal">
        <div class="modal-content">
            <h2><i class="fas fa-hands-helping"></i> Create Donation Request</h2>
            <form id="requestForm">
                <div class="form-group">
                    <label for="requestTitle">Request Title</label>
                    <input type="text" id="requestTitle" placeholder="e.g., Need meals for community dinner" required>
                </div>
                <div class="form-group">
                    <label for="requestDescription">Details</label>
                    <textarea id="requestDescription" placeholder="Describe what type of food you need and for what purpose" required></textarea>
                </div>
                <div class="form-group">
                    <label for="requestQuantity">Quantity Needed (approx. servings)</label>
                    <input type="number" id="requestQuantity" min="1" placeholder="e.g., 50" required>
                </div>
                <div class="form-group">
                    <label for="requestCategory">Preferred Food Category</label>
                    <select id="requestCategory" required>
                        <option value="">Select category</option>
                        <option value="prepared">Prepared Meals</option>
                        <option value="produce">Fresh Produce</option>
                        <option value="bakery">Bakery Items</option>
                        <option value="dairy">Dairy Products</option>
                        <option value="protein">Protein Sources</option>
                        <option value="any">Any Category</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="requestUrgency">Urgency</label>
                    <select id="requestUrgency" required>
                        <option value="low">Low - Within a week</option>
                        <option value="medium">Medium - Within 3 days</option>
                        <option value="high">High - Within 24 hours</option>
                        <option value="urgent">Urgent - As soon as possible</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="requestLocation">Delivery Location</label>
                    <input type="text" id="requestLocation" placeholder="Full address for delivery" required>
                    <div class="map-container">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>Map preview would appear here</span>
                    </div>
                </div>
                <div class="modal-buttons">
                    <button type="button" id="cancelRequestBtn" class="btn btn-cancel">Cancel</button>
                    <button type="submit" class="btn btn-primary">Create Request</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Claim Donation Modal -->
    <div id="claimModal" class="modal">
        <div class="modal-content">
            <h2><i class="fas fa-hand-holding-heart"></i> Claim Donation</h2>
            <form id="claimForm">
                <div class="form-group">
                    <label for="claimMessage">Message to Donor (Optional)</label>
                    <textarea id="claimMessage" placeholder="Add any details about your organization or how you plan to use the food"></textarea>
                </div>
                <div class="form-group">
                    <label for="claimPickupTime">Proposed Pickup Time</label>
                    <input type="datetime-local" id="claimPickupTime" required>
                </div>
                <div class="modal-buttons">
                    <button type="button" id="cancelClaimBtn" class="btn btn-cancel">Cancel</button>
                    <button type="submit" class="btn btn-primary">Claim Donation</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Notification -->
    <div id="notification" class="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notificationMessage">Operation completed successfully!</span>
    </div>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-section">
                    <h3>FoodSave</h3>
                    <p>Connecting surplus food with communities in need to reduce waste and fight hunger.</p>
                    <div class="social-links">
                        <a href="#"><i class="fab fa-facebook"></i></a>
                        <a href="#"><i class="fab fa-twitter"></i></a>
                        <a href="#"><i class="fab fa-instagram"></i></a>
                        <a href="#"><i class="fab fa-linkedin"></i></a>
                    </div>
                </div>
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#" class="nav-link" data-page="home">Home</a></li>
                        <li><a href="#" class="nav-link" data-page="donations">Food Donations</a></li>
                        <li><a href="#" class="nav-link" data-page="requests">Donation Requests</a></li>
                        <li><a href="#" class="nav-link" data-page="dashboard">Dashboard</a></li>
                    </ul>
                </div>
                <div class="footer-section">
                    <h3>Contact Us</h3>
                    <ul>
                        <li><i class="fas fa-envelope"></i> hello@foodsave.org</li>
                        <li><i class="fas fa-phone"></i> (555) 123-4567</li>
                        <li><i class="fas fa-map-marker-alt"></i> 123 Green Street, Eco City</li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2024 FoodSave. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        // Enhanced Database Class
        class Database {
            constructor() {
                this.init();
            }

            init() {
                if (!localStorage.getItem('foodSaveDB')) {
                    const initialData = {
                        users: [
                            {
                                id: 1,
                                name: "Demo Donor",
                                email: "donor@example.com",
                                password: "password",
                                role: "donor",
                                joinDate: new Date().toISOString(),
                                verified: true
                            },
                            {
                                id: 2,
                                name: "Community NGO",
                                email: "ngo@example.com",
                                password: "password",
                                role: "receiver",
                                joinDate: new Date().toISOString(),
                                verified: true
                            },
                            {
                                id: 3,
                                name: "Volunteer User",
                                email: "volunteer@example.com",
                                password: "password",
                                role: "volunteer",
                                joinDate: new Date().toISOString(),
                                verified: true
                            }
                        ],
                        donations: [
                            {
                                id: 1,
                                userId: 1,
                                title: "Fresh Bread & Pastries",
                                description: "Assorted bread and pastries from today's baking. Packaged and ready for pickup.",
                                quantity: 25,
                                category: "bakery",
                                expiry: new Date(Date.now() + 24 * 60 * 60 * 1000).toISOString(),
                                location: "123 Bakery Street, Downtown",
                                status: "available",
                                createdAt: new Date().toISOString(),
                                claimedBy: null,
                                claimMessage: null,
                                pickupTime: null
                            },
                            {
                                id: 2,
                                userId: 1,
                                title: "Fresh Fruits and Vegetables",
                                description: "Assorted fresh produce including apples, oranges, carrots, and potatoes.",
                                quantity: 40,
                                category: "produce",
                                expiry: new Date(Date.now() + 3 * 24 * 60 * 60 * 1000).toISOString(),
                                location: "456 Market Ave, City Center",
                                status: "available",
                                createdAt: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(),
                                claimedBy: null,
                                claimMessage: null,
                                pickupTime: null
                            }
                        ],
                        requests: [
                            {
                                id: 1,
                                userId: 2,
                                title: "Meals for Community Dinner",
                                description: "We need prepared meals for our weekly community dinner serving homeless individuals.",
                                quantity: 50,
                                category: "prepared",
                                urgency: "medium",
                                location: "456 Community Ave, Westside",
                                status: "open",
                                createdAt: new Date().toISOString()
                            },
                            {
                                id: 2,
                                userId: 2,
                                title: "Urgent: Food for Shelter",
                                description: "Our shelter has run out of food supplies and we need immediate assistance.",
                                quantity: 75,
                                category: "any",
                                urgency: "urgent",
                                location: "789 Shelter Road, North District",
                                status: "open",
                                createdAt: new Date(Date.now() - 5 * 60 * 60 * 1000).toISOString()
                            }
                        ],
                        notifications: [
                            {
                                id: 1,
                                userId: 3, // Volunteer
                                type: "new_donation",
                                title: "New Donation Available",
                                message: "Fresh Bread & Pastries (25 servings) is available for pickup at 123 Bakery Street, Downtown",
                                donationId: 1,
                                read: false,
                                createdAt: new Date().toISOString()
                            }
                        ],
                        stats: {
                            mealsSaved: 15247,
                            activePartners: 642,
                            citiesReached: 78
                        }
                    };
                    localStorage.setItem('foodSaveDB', JSON.stringify(initialData));
                }
            }

            getData() {
                return JSON.parse(localStorage.getItem('foodSaveDB'));
            }

            saveData(data) {
                localStorage.setItem('foodSaveDB', JSON.stringify(data));
            }

            // User methods
            addUser(user) {
                const data = this.getData();
                const newUser = {
                    ...user,
                    id: Date.now(),
                    joinDate: new Date().toISOString(),
                    verified: false
                };
                data.users.push(newUser);
                this.saveData(data);
                return newUser;
            }

            getUserByEmail(email) {
                const data = this.getData();
                return data.users.find(user => user.email === email);
            }

            getUserById(id) {
                const data = this.getData();
                return data.users.find(user => user.id === id);
            }

            getUsersByRole(role) {
                const data = this.getData();
                return data.users.filter(user => user.role === role);
            }

            // Donation methods
            getDonations() {
                const data = this.getData();
                return data.donations;
            }

            getAvailableDonations() {
                const data = this.getData();
                return data.donations.filter(donation => donation.status === "available");
            }

            getUserDonations(userId) {
                const data = this.getData();
                return data.donations.filter(donation => donation.userId === userId);
            }

            addDonation(donation) {
                const data = this.getData();
                const newDonation = {
                    ...donation,
                    id: Date.now(),
                    createdAt: new Date().toISOString(),
                    status: "available",
                    claimedBy: null,
                    claimMessage: null,
                    pickupTime: null
                };
                data.donations.push(newDonation);
                this.saveData(data);
                return newDonation;
            }

            updateDonation(id, updates) {
                const data = this.getData();
                const donationIndex = data.donations.findIndex(d => d.id === id);
                if (donationIndex !== -1) {
                    data.donations[donationIndex] = { ...data.donations[donationIndex], ...updates };
                    this.saveData(data);
                    return data.donations[donationIndex];
                }
                return null;
            }

            deleteDonation(id) {
                const data = this.getData();
                data.donations = data.donations.filter(d => d.id !== id);
                this.saveData(data);
            }

            // Request methods
            getRequests() {
                const data = this.getData();
                return data.requests;
            }

            getUserRequests(userId) {
                const data = this.getData();
                return data.requests.filter(request => request.userId === userId);
            }

            addRequest(request) {
                const data = this.getData();
                const newRequest = {
                    ...request,
                    id: Date.now(),
                    createdAt: new Date().toISOString(),
                    status: "open"
                };
                data.requests.push(newRequest);
                this.saveData(data);
                return newRequest;
            }

            updateRequest(id, updates) {
                const data = this.getData();
                const requestIndex = data.requests.findIndex(r => r.id === id);
                if (requestIndex !== -1) {
                    data.requests[requestIndex] = { ...data.requests[requestIndex], ...updates };
                    this.saveData(data);
                    return data.requests[requestIndex];
                }
                return null;
            }

            deleteRequest(id) {
                const data = this.getData();
                data.requests = data.requests.filter(r => r.id !== id);
                this.saveData(data);
            }

            // Notification methods
            getNotifications(userId) {
                const data = this.getData();
                return data.notifications.filter(notification => notification.userId === userId);
            }

            getUnreadNotifications(userId) {
                const data = this.getData();
                return data.notifications.filter(notification => 
                    notification.userId === userId && !notification.read
                );
            }

            addNotification(notification) {
                const data = this.getData();
                const newNotification = {
                    ...notification,
                    id: Date.now(),
                    createdAt: new Date().toISOString(),
                    read: false
                };
                data.notifications.push(newNotification);
                this.saveData(data);
                return newNotification;
            }

            markNotificationAsRead(id) {
                const data = this.getData();
                const notificationIndex = data.notifications.findIndex(n => n.id === id);
                if (notificationIndex !== -1) {
                    data.notifications[notificationIndex].read = true;
                    this.saveData(data);
                    return data.notifications[notificationIndex];
                }
                return null;
            }

            markAllNotificationsAsRead(userId) {
                const data = this.getData();
                data.notifications.forEach(notification => {
                    if (notification.userId === userId) {
                        notification.read = true;
                    }
                });
                this.saveData(data);
            }

            // Stats methods
            getStats() {
                return this.getData().stats;
            }

            updateStats(newStats) {
                const data = this.getData();
                data.stats = { ...data.stats, ...newStats };
                this.saveData(data);
                return data.stats;
            }
        }

        // Main Application Class
        class FoodSaveApp {
            constructor() {
                this.db = new Database();
                this.currentUser = null;
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.setupErrorHandling();
                this.loadTheme();
                this.checkAuthStatus();
                this.loadStats();
                this.loadDonations();
                this.loadRequests();
                this.loadDashboard();
                this.startRealTimeUpdates();
            }

            setupEventListeners() {
                // Navigation
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.addEventListener('click', (e) => this.handleNavigation(e));
                });

                // Auth buttons
                document.getElementById('loginBtn').addEventListener('click', () => this.openModal('authModal'));
                document.getElementById('registerBtn').addEventListener('click', () => this.showRegisterTab());
                document.getElementById('logoutBtn').addEventListener('click', () => this.logout());

                // Modal buttons
                document.getElementById('cancelAuthBtn').addEventListener('click', () => this.closeModal('authModal'));
                document.getElementById('cancelRegisterBtn').addEventListener('click', () => this.closeModal('authModal'));
                document.getElementById('addDonationBtn').addEventListener('click', () => this.openDonationModal());
                document.getElementById('addRequestBtn').addEventListener('click', () => this.openRequestModal());
                document.getElementById('cancelDonationBtn').addEventListener('click', () => this.closeModal('donationModal'));
                document.getElementById('cancelRequestBtn').addEventListener('click', () => this.closeModal('requestModal'));
                document.getElementById('cancelClaimBtn').addEventListener('click', () => this.closeModal('claimModal'));

                // Forms
                document.getElementById('loginForm').addEventListener('submit', (e) => this.handleLogin(e));
                document.getElementById('registerForm').addEventListener('submit', (e) => this.handleRegister(e));
                document.getElementById('donationForm').addEventListener('submit', (e) => this.handleDonationSubmit(e));
                document.getElementById('requestForm').addEventListener('submit', (e) => this.handleRequestSubmit(e));
                document.getElementById('claimForm').addEventListener('submit', (e) => this.handleClaimSubmit(e));

                // Theme toggle
                document.getElementById('themeToggle').addEventListener('click', () => this.toggleTheme());

                // CTA buttons
                document.getElementById('getStartedBtn').addEventListener('click', () => this.navigateTo('dashboard'));
                document.getElementById('learnMoreBtn').addEventListener('click', () => this.navigateTo('donations'));

                // Notification icon
                document.getElementById('notificationIcon').addEventListener('click', () => this.showNotifications());

                // Close modals on outside click
                document.querySelectorAll('.modal').forEach(modal => {
                    modal.addEventListener('click', (e) => {
                        if (e.target === modal) this.closeModal(modal.id);
                    });
                });

                // Tab switching
                document.querySelectorAll('.tab').forEach(tab => {
                    tab.addEventListener('click', () => this.switchTab(tab));
                });

                // Search and filter functionality
                document.getElementById('donationSearch').addEventListener('input', 
                    this.debounce((e) => this.filterDonations(), 300)
                );
                document.getElementById('donationFilter').addEventListener('change', () => this.filterDonations());
                document.getElementById('donationSort').addEventListener('change', () => this.filterDonations());
                
                document.getElementById('requestSearch').addEventListener('input', 
                    this.debounce((e) => this.filterRequests(), 300)
                );
                document.getElementById('requestFilter').addEventListener('change', () => this.filterRequests());
                document.getElementById('requestSort').addEventListener('change', () => this.filterRequests());

                // Password strength indicator
                document.getElementById('registerPassword').addEventListener('input', (e) => this.checkPasswordStrength(e.target.value));
            }

            setupErrorHandling() {
                window.addEventListener('error', (event) => {
                    console.error('Global error:', event.error);
                    this.showNotification('An unexpected error occurred. Please try again.', 'error');
                });
                
                window.addEventListener('unhandledrejection', (event) => {
                    console.error('Unhandled promise rejection:', event.reason);
                    this.showNotification('An unexpected error occurred. Please try again.', 'error');
                });
            }

            // Authentication Methods
            handleLogin(e) {
                e.preventDefault();
                const email = document.getElementById('loginEmail').value;
                const password = document.getElementById('loginPassword').value;

                // Basic validation
                if (!this.validateEmail(email)) {
                    this.showNotification('Please enter a valid email address.', 'error');
                    return;
                }

                const user = this.db.getUserByEmail(email);
                if (user && user.password === password) {
                    this.currentUser = user;
                    localStorage.setItem('currentUser', JSON.stringify(user));
                    this.updateUIForAuth();
                    this.closeModal('authModal');
                    this.showNotification(`Welcome back, ${user.name}!`);
                    document.getElementById('loginForm').reset();
                    
                    // Reload current page content
                    const activePage = document.querySelector('.page-section.active').id;
                    if (activePage === 'donations') this.loadDonations();
                    else if (activePage === 'requests') this.loadRequests();
                    else if (activePage === 'dashboard') this.loadDashboard();
                } else {
                    this.showNotification('Invalid email or password. Please try again.', 'error');
                }
            }

            handleRegister(e) {
                e.preventDefault();
                const name = document.getElementById('registerName').value;
                const email = document.getElementById('registerEmail').value;
                const password = document.getElementById('registerPassword').value;
                const role = document.getElementById('registerRole').value;

                // Validation
                if (!this.validateEmail(email)) {
                    this.showNotification('Please enter a valid email address.', 'error');
                    return;
                }

                if (!this.validatePassword(password)) {
                    this.showNotification('Password must be at least 8 characters with letters and numbers.', 'error');
                    return;
                }

                // Check if user already exists
                if (this.db.getUserByEmail(email)) {
                    this.showNotification('A user with this email already exists.', 'error');
                    return;
                }

                const newUser = this.db.addUser({ name, email, password, role });
                
                // Automatically log in the user after registration
                this.currentUser = newUser;
                localStorage.setItem('currentUser', JSON.stringify(newUser));
                this.updateUIForAuth();
                this.closeModal('authModal');
                this.showNotification(`Account created successfully! Welcome, ${name}!`);
                document.getElementById('registerForm').reset();

                // Update stats
                const stats = this.db.getStats();
                this.db.updateStats({ activePartners: stats.activePartners + 1 });
                this.loadStats();

                // Load dashboard and navigate to it
                this.loadDashboard();
                this.navigateTo('dashboard');
            }

            logout() {
                localStorage.removeItem('currentUser');
                this.currentUser = null;
                this.updateUIForGuest();
                this.showNotification('You have been logged out successfully.');
                
                // Reload current page content
                const activePage = document.querySelector('.page-section.active').id;
                if (activePage === 'donations') this.loadDonations();
                else if (activePage === 'requests') this.loadRequests();
                else if (activePage === 'dashboard') this.loadDashboard();
            }

            checkAuthStatus() {
                const userData = localStorage.getItem('currentUser');
                if (userData) {
                    this.currentUser = JSON.parse(userData);
                    this.updateUIForAuth();
                } else {
                    this.updateUIForGuest();
                }
            }

            updateUIForAuth() {
                document.getElementById('userWelcome').textContent = `Welcome, ${this.currentUser.name}!`;
                document.getElementById('authButtons').style.display = 'none';
                document.getElementById('userActions').style.display = 'flex';
                document.getElementById('addDonationBtn').disabled = false;
                document.getElementById('addRequestBtn').disabled = false;
                
                // Show notification icon if user has unread notifications
                this.updateNotificationBadge();
                
                // Show volunteer notifications section if user is a volunteer
                if (this.currentUser.role === 'volunteer') {
                    document.getElementById('volunteerNotificationsSection').style.display = 'block';
                } else {
                    document.getElementById('volunteerNotificationsSection').style.display = 'none';
                }
            }

            updateUIForGuest() {
                document.getElementById('userWelcome').textContent = 'Welcome! Please log in';
                document.getElementById('authButtons').style.display = 'flex';
                document.getElementById('userActions').style.display = 'none';
                document.getElementById('addDonationBtn').disabled = true;
                document.getElementById('addRequestBtn').disabled = true;
                document.getElementById('notificationIcon').style.display = 'none';
                document.getElementById('volunteerNotificationsSection').style.display = 'none';
            }

            updateNotificationBadge() {
                if (!this.currentUser) return;
                
                const unreadNotifications = this.db.getUnreadNotifications(this.currentUser.id);
                const notificationIcon = document.getElementById('notificationIcon');
                const notificationCount = document.getElementById('notificationCount');
                
                if (unreadNotifications.length > 0) {
                    notificationIcon.style.display = 'block';
                    notificationCount.textContent = unreadNotifications.length;
                } else {
                    notificationIcon.style.display = 'none';
                }
            }

            // Navigation Methods
            handleNavigation(e) {
                e.preventDefault();
                const targetPage = e.target.closest('.nav-link').getAttribute('data-page');
                this.navigateTo(targetPage);
            }

            navigateTo(page) {
                // Update active nav link
                document.querySelectorAll('.nav-link').forEach(nav => nav.classList.remove('active'));
                document.querySelector(`[data-page="${page}"]`).classList.add('active');

                // Show target page
                document.querySelectorAll('.page-section').forEach(section => {
                    section.classList.remove('active');
                });
                document.getElementById(page).classList.add('active');

                // Load page-specific content
                if (page === 'donations') this.loadDonations();
                else if (page === 'requests') this.loadRequests();
                else if (page === 'dashboard') this.loadDashboard();

                window.scrollTo(0, 0);
            }

            // Modal Methods
            openModal(modalId) {
                document.getElementById(modalId).style.display = 'flex';
            }

            closeModal(modalId) {
                document.getElementById(modalId).style.display = 'none';
            }

            showRegisterTab() {
                this.openModal('authModal');
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                document.querySelector('[data-tab="register"]').classList.add('active');
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                document.getElementById('registerTab').classList.add('active');
            }

            switchTab(tab) {
                const tabId = tab.getAttribute('data-tab');
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                document.getElementById(`${tabId}Tab`).classList.add('active');
            }

            openDonationModal() {
                if (!this.currentUser) {
                    this.showNotification('Please log in to add a donation.', 'error');
                    return;
                }
                document.getElementById('donationForm').reset();
                const tomorrow = new Date();
                tomorrow.setDate(tomorrow.getDate() + 1);
                document.getElementById('donationExpiry').value = tomorrow.toISOString().slice(0, 16);
                this.openModal('donationModal');
            }

            openRequestModal() {
                if (!this.currentUser) {
                    this.showNotification('Please log in to create a request.', 'error');
                    return;
                }
                document.getElementById('requestForm').reset();
                this.openModal('requestModal');
            }

            openClaimModal(donationId) {
                if (!this.currentUser) {
                    this.showNotification('Please log in to claim a donation.', 'error');
                    return;
                }
                
                if (this.currentUser.role !== 'receiver') {
                    this.showNotification('Only NGOs and community organizations can claim donations.', 'error');
                    return;
                }
                
                document.getElementById('claimForm').reset();
                const tomorrow = new Date();
                tomorrow.setDate(tomorrow.getDate() + 1);
                document.getElementById('claimPickupTime').value = tomorrow.toISOString().slice(0, 16);
                
                // Store the donation ID for the claim form
                document.getElementById('claimForm').dataset.donationId = donationId;
                
                this.openModal('claimModal');
            }

            // Data Loading Methods
            loadStats() {
                const stats = this.db.getStats();
                document.getElementById('mealsSaved').textContent = this.formatNumber(stats.mealsSaved) + '+';
                document.getElementById('activePartners').textContent = this.formatNumber(stats.activePartners) + '+';
                document.getElementById('citiesReached').textContent = this.formatNumber(stats.citiesReached) + '+';
            }

            loadDonations() {
                const donationsList = document.getElementById('donationsList');
                const donations = this.db.getDonations();

                if (donations.length === 0) {
                    donationsList.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-utensils"></i>
                            <h3>No donations available</h3>
                            <p>There are no food donations available at the moment.</p>
                            ${this.currentUser ? '<p>Be the first to add a donation!</p>' : '<p>Please log in to add a donation.</p>'}
                        </div>
                    `;
                    return;
                }

                this.renderDonations(donations);
            }

            renderDonations(donations) {
                const donationsList = document.getElementById('donationsList');
                donationsList.innerHTML = '';
                
                donations.forEach(donation => {
                    const user = this.db.getUserById(donation.userId);
                    const donationElement = document.createElement('div');
                    donationElement.className = 'listing-item';
                    
                    let actionButtons = '';
                    if (this.currentUser) {
                        if (this.currentUser.id === donation.userId) {
                            // Donor can edit/delete their own donation
                            actionButtons = `
                                <div class="action-buttons">
                                    <button class="btn btn-primary btn-small" onclick="app.editDonation(${donation.id})"><i class="fas fa-edit"></i> Edit</button>
                                    <button class="btn btn-danger btn-small" onclick="app.deleteDonation(${donation.id})"><i class="fas fa-trash"></i> Delete</button>
                                </div>
                            `;
                        } else if (this.currentUser.role === 'receiver' && donation.status === 'available') {
                            // NGO can claim available donations
                            actionButtons = `
                                <div class="action-buttons">
                                    <button class="btn btn-success btn-small" onclick="app.openClaimModal(${donation.id})"><i class="fas fa-hand-holding-heart"></i> Claim Donation</button>
                                </div>
                            `;
                        } else if (donation.status === 'claimed' && donation.claimedBy === this.currentUser.id) {
                            // NGO can see their claimed donations
                            actionButtons = `
                                <div class="action-buttons">
                                    <span class="btn btn-outline btn-small"><i class="fas fa-check"></i> You claimed this donation</span>
                                </div>
                            `;
                        }
                    }
                    
                    donationElement.innerHTML = `
                        <div class="listing-header">
                            <div class="listing-title">${donation.title}</div>
                            <div class="listing-status status-${donation.status}">${donation.status}</div>
                        </div>
                        <p>${donation.description}</p>
                        <div class="listing-details">
                            <div class="detail-item"><i class="fas fa-utensils"></i> Serves: ${donation.quantity} people</div>
                            <div class="detail-item"><i class="fas fa-tag"></i> Category: ${donation.category}</div>
                            <div class="detail-item"><i class="fas fa-clock"></i> Best before: ${this.formatDate(donation.expiry)}</div>
                            <div class="detail-item"><i class="fas fa-map-marker-alt"></i> ${donation.location}</div>
                            <div class="detail-item"><i class="fas fa-user"></i> Donated by: ${user.name}</div>
                            ${donation.claimedBy ? `<div class="detail-item"><i class="fas fa-hand-holding-heart"></i> Claimed by: ${this.db.getUserById(donation.claimedBy).name}</div>` : ''}
                        </div>
                        ${actionButtons}
                    `;
                    donationsList.appendChild(donationElement);
                });
            }

            filterDonations() {
                const searchTerm = document.getElementById('donationSearch').value.toLowerCase();
                const categoryFilter = document.getElementById('donationFilter').value;
                const sortBy = document.getElementById('donationSort').value;
                
                let donations = this.db.getDonations();
                
                // Apply search filter
                if (searchTerm) {
                    donations = donations.filter(donation => 
                        donation.title.toLowerCase().includes(searchTerm) ||
                        donation.description.toLowerCase().includes(searchTerm) ||
                        donation.category.toLowerCase().includes(searchTerm)
                    );
                }
                
                // Apply category filter
                if (categoryFilter !== 'all') {
                    donations = donations.filter(donation => donation.category === categoryFilter);
                }
                
                // Apply sorting
                switch(sortBy) {
                    case 'newest':
                        donations.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
                        break;
                    case 'oldest':
                        donations.sort((a, b) => new Date(a.createdAt) - new Date(b.createdAt));
                        break;
                    case 'quantity':
                        donations.sort((a, b) => b.quantity - a.quantity);
                        break;
                    case 'expiry':
                        donations.sort((a, b) => new Date(a.expiry) - new Date(b.expiry));
                        break;
                }
                
                this.renderDonations(donations);
            }

            loadRequests() {
                const requestsList = document.getElementById('requestsList');
                const requests = this.db.getRequests();

                if (requests.length === 0) {
                    requestsList.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-hands-helping"></i>
                            <h3>No requests available</h3>
                            <p>There are no donation requests at the moment.</p>
                            ${this.currentUser ? '<p>Be the first to create a request!</p>' : '<p>Please log in to create a request.</p>'}
                        </div>
                    `;
                    return;
                }

                this.renderRequests(requests);
            }

            renderRequests(requests) {
                const requestsList = document.getElementById('requestsList');
                requestsList.innerHTML = '';
                
                requests.forEach(request => {
                    const user = this.db.getUserById(request.userId);
                    const urgencyClass = `status-${request.urgency === 'urgent' ? 'urgent' : 'open'}`;
                    const requestElement = document.createElement('div');
                    requestElement.className = 'request-item';
                    requestElement.innerHTML = `
                        <div class="request-header">
                            <div class="request-title">${request.title}</div>
                            <div class="request-status ${urgencyClass}">${request.urgency}</div>
                        </div>
                        <p>${request.description}</p>
                        <div class="request-details">
                            <div class="detail-item"><i class="fas fa-utensils"></i> Needed: ${request.quantity} servings</div>
                            <div class="detail-item"><i class="fas fa-tag"></i> Category: ${request.category}</div>
                            <div class="detail-item"><i class="fas fa-map-marker-alt"></i> ${request.location}</div>
                            <div class="detail-item"><i class="fas fa-user"></i> Requested by: ${user.name}</div>
                        </div>
                        ${this.currentUser && this.currentUser.id === request.userId ? `
                        <div class="action-buttons">
                            <button class="btn btn-primary btn-small" onclick="app.editRequest(${request.id})"><i class="fas fa-edit"></i> Edit</button>
                            <button class="btn btn-danger btn-small" onclick="app.deleteRequest(${request.id})"><i class="fas fa-trash"></i> Delete</button>
                        </div>
                        ` : ''}
                    `;
                    requestsList.appendChild(requestElement);
                });
            }

            filterRequests() {
                const searchTerm = document.getElementById('requestSearch').value.toLowerCase();
                const categoryFilter = document.getElementById('requestFilter').value;
                const sortBy = document.getElementById('requestSort').value;
                
                let requests = this.db.getRequests();
                
                // Apply search filter
                if (searchTerm) {
                    requests = requests.filter(request => 
                        request.title.toLowerCase().includes(searchTerm) ||
                        request.description.toLowerCase().includes(searchTerm) ||
                        request.category.toLowerCase().includes(searchTerm)
                    );
                }
                
                // Apply category filter
                if (categoryFilter !== 'all') {
                    requests = requests.filter(request => request.category === categoryFilter);
                }
                
                // Apply sorting
                switch(sortBy) {
                    case 'newest':
                        requests.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
                        break;
                    case 'oldest':
                        requests.sort((a, b) => new Date(a.createdAt) - new Date(b.createdAt));
                        break;
                    case 'urgency':
                        const urgencyOrder = { 'urgent': 4, 'high': 3, 'medium': 2, 'low': 1 };
                        requests.sort((a, b) => urgencyOrder[b.urgency] - urgencyOrder[a.urgency]);
                        break;
                    case 'quantity':
                        requests.sort((a, b) => b.quantity - a.quantity);
                        break;
                }
                
                this.renderRequests(requests);
            }

            loadDashboard() {
                if (!this.currentUser) {
                    document.getElementById('userProfile').innerHTML = '<p>Please log in to view your dashboard.</p>';
                    document.getElementById('userDonationsList').innerHTML = '<p>Please log in to view your donations.</p>';
                    document.getElementById('userRequestsList').innerHTML = '<p>Please log in to view your requests.</p>';
                    return;
                }

                // User profile
                const roleBadgeClass = `badge-${this.currentUser.role}`;
                document.getElementById('userProfile').innerHTML = `
                    <p><strong>Name:</strong> ${this.currentUser.name}</p>
                    <p><strong>Email:</strong> ${this.currentUser.email}</p>
                    <p><strong>Role:</strong> <span class="role-badge ${roleBadgeClass}">${this.currentUser.role}</span></p>
                    <p><strong>Member since:</strong> ${this.formatDate(this.currentUser.joinDate)}</p>
                `;

                // User donations and requests
                const userDonations = this.db.getUserDonations(this.currentUser.id);
                const userRequests = this.db.getUserRequests(this.currentUser.id);

                // Calculate total meals provided
                const totalMeals = userDonations.reduce((total, donation) => total + donation.quantity, 0);

                document.getElementById('userDonationsCount').textContent = userDonations.length;
                document.getElementById('userRequestsCount').textContent = userRequests.length;
                document.getElementById('userMealsCount').textContent = totalMeals;

                // User donations list
                const userDonationsList = document.getElementById('userDonationsList');
                if (userDonations.length === 0) {
                    userDonationsList.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-utensils"></i>
                            <h3>No donations yet</h3>
                            <p>You haven't made any donations yet.</p>
                            <button class="btn btn-primary" onclick="app.openDonationModal()">Add Your First Donation</button>
                        </div>
                    `;
                } else {
                    userDonationsList.innerHTML = '';
                    userDonations.forEach(donation => {
                        const donationElement = document.createElement('div');
                        donationElement.className = 'listing-item';
                        donationElement.innerHTML = `
                            <div class="listing-header">
                                <div class="listing-title">${donation.title}</div>
                                <div class="listing-status status-${donation.status}">${donation.status}</div>
                            </div>
                            <p>${donation.description}</p>
                            <div class="listing-details">
                                <div class="detail-item"><i class="fas fa-utensils"></i> Serves: ${donation.quantity} people</div>
                                <div class="detail-item"><i class="fas fa-tag"></i> Category: ${donation.category}</div>
                                <div class="detail-item"><i class="fas fa-clock"></i> Best before: ${this.formatDate(donation.expiry)}</div>
                                <div class="detail-item"><i class="fas fa-map-marker-alt"></i> ${donation.location}</div>
                                ${donation.claimedBy ? `<div class="detail-item"><i class="fas fa-hand-holding-heart"></i> Claimed by: ${this.db.getUserById(donation.claimedBy).name}</div>` : ''}
                            </div>
                            <div class="action-buttons">
                                <button class="btn btn-primary btn-small" onclick="app.editDonation(${donation.id})"><i class="fas fa-edit"></i> Edit</button>
                                <button class="btn btn-danger btn-small" onclick="app.deleteDonation(${donation.id})"><i class="fas fa-trash"></i> Delete</button>
                            </div>
                        `;
                        userDonationsList.appendChild(donationElement);
                    });
                }

                // User requests list
                const userRequestsList = document.getElementById('userRequestsList');
                if (userRequests.length === 0) {
                    userRequestsList.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-hands-helping"></i>
                            <h3>No requests yet</h3>
                            <p>You haven't made any requests yet.</p>
                            <button class="btn btn-primary" onclick="app.openRequestModal()">Create Your First Request</button>
                        </div>
                    `;
                } else {
                    userRequestsList.innerHTML = '';
                    userRequests.forEach(request => {
                        const urgencyClass = `status-${request.urgency === 'urgent' ? 'urgent' : 'open'}`;
                        const requestElement = document.createElement('div');
                        requestElement.className = 'request-item';
                        requestElement.innerHTML = `
                            <div class="request-header">
                                <div class="request-title">${request.title}</div>
                                <div class="request-status ${urgencyClass}">${request.urgency}</div>
                            </div>
                            <p>${request.description}</p>
                            <div class="request-details">
                                <div class="detail-item"><i class="fas fa-utensils"></i> Needed: ${request.quantity} servings</div>
                                <div class="detail-item"><i class="fas fa-tag"></i> Category: ${request.category}</div>
                                <div class="detail-item"><i class="fas fa-map-marker-alt"></i> ${request.location}</div>
                            </div>
                            <div class="action-buttons">
                                <button class="btn btn-primary btn-small" onclick="app.editRequest(${request.id})"><i class="fas fa-edit"></i> Edit</button>
                                <button class="btn btn-danger btn-small" onclick="app.deleteRequest(${request.id})"><i class="fas fa-trash"></i> Delete</button>
                            </div>
                        `;
                        userRequestsList.appendChild(requestElement);
                    });
                }

                // Volunteer notifications
                if (this.currentUser.role === 'volunteer') {
                    this.loadVolunteerNotifications();
                }
            }

            loadVolunteerNotifications() {
                const volunteerNotificationsList = document.getElementById('volunteerNotificationsList');
                const notifications = this.db.getNotifications(this.currentUser.id);

                if (notifications.length === 0) {
                    volunteerNotificationsList.innerHTML = `
                        <div class="empty-state">
                            <i class="fas fa-bell-slash"></i>
                            <h3>No notifications</h3>
                            <p>You don't have any notifications at the moment.</p>
                        </div>
                    `;
                    return;
                }

                volunteerNotificationsList.innerHTML = '';
                notifications.forEach(notification => {
                    const notificationElement = document.createElement('div');
                    notificationElement.className = 'listing-item';
                    notificationElement.innerHTML = `
                        <div class="listing-header">
                            <div class="listing-title">${notification.title}</div>
                            <div class="listing-status ${notification.read ? 'status-completed' : 'status-pending'}">${notification.read ? 'read' : 'unread'}</div>
                        </div>
                        <p>${notification.message}</p>
                        <div class="listing-details">
                            <div class="detail-item"><i class="fas fa-clock"></i> ${this.formatDate(notification.createdAt)}</div>
                        </div>
                        <div class="action-buttons">
                            ${!notification.read ? `
                            <button class="btn btn-primary btn-small" onclick="app.markNotificationAsRead(${notification.id})"><i class="fas fa-check"></i> Mark as Read</button>
                            ` : ''}
                            <button class="btn btn-outline btn-small" onclick="app.viewDonation(${notification.donationId})"><i class="fas fa-eye"></i> View Donation</button>
                        </div>
                    `;
                    volunteerNotificationsList.appendChild(notificationElement);
                });
            }

            // Form Handlers
            handleDonationSubmit(e) {
                e.preventDefault();
                
                // Validate form
                if (!this.validateDonationForm()) {
                    return;
                }
                
                const title = document.getElementById('donationTitle').value;
                const description = document.getElementById('donationDescription').value;
                const quantity = parseInt(document.getElementById('donationQuantity').value);
                const category = document.getElementById('donationCategory').value;
                const expiry = document.getElementById('donationExpiry').value;
                const location = document.getElementById('donationLocation').value;

                const newDonation = this.db.addDonation({
                    userId: this.currentUser.id,
                    title,
                    description,
                    quantity,
                    category,
                    expiry: new Date(expiry).toISOString(),
                    location
                });

                this.closeModal('donationModal');
                this.showNotification('Donation added successfully!');
                
                // Notify volunteers about the new donation
                this.notifyVolunteers(newDonation);
                
                this.loadDonations();
                this.loadDashboard();

                // Update stats
                const stats = this.db.getStats();
                this.db.updateStats({ mealsSaved: stats.mealsSaved + quantity });
                this.loadStats();
            }

            handleRequestSubmit(e) {
                e.preventDefault();
                const title = document.getElementById('requestTitle').value;
                const description = document.getElementById('requestDescription').value;
                const quantity = parseInt(document.getElementById('requestQuantity').value);
                const category = document.getElementById('requestCategory').value;
                const urgency = document.getElementById('requestUrgency').value;
                const location = document.getElementById('requestLocation').value;

                this.db.addRequest({
                    userId: this.currentUser.id,
                    title,
                    description,
                    quantity,
                    category,
                    urgency,
                    location
                });

                this.closeModal('requestModal');
                this.showNotification('Request created successfully!');
                this.loadRequests();
                this.loadDashboard();
            }

            handleClaimSubmit(e) {
                e.preventDefault();
                const donationId = parseInt(document.getElementById('claimForm').dataset.donationId);
                const message = document.getElementById('claimMessage').value;
                const pickupTime = document.getElementById('claimPickupTime').value;

                // Update donation status
                this.db.updateDonation(donationId, {
                    status: 'claimed',
                    claimedBy: this.currentUser.id,
                    claimMessage: message,
                    pickupTime: new Date(pickupTime).toISOString()
                });

                this.closeModal('claimModal');
                this.showNotification('Donation claimed successfully!');
                this.loadDonations();
                this.loadDashboard();

                // Notify the donor about the claim
                const donation = this.db.getDonations().find(d => d.id === donationId);
                if (donation) {
                    this.notifyDonor(donation, this.currentUser);
                }
            }

            // Validation Methods
            validateEmail(email) {
                const re = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;
                return re.test(String(email).toLowerCase());
            }

            validatePassword(password) {
                // Require minimum 8 characters with mix of letters and numbers
                const regex = /^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/;
                return regex.test(password);
            }

            validateDonationForm() {
                const quantity = parseInt(document.getElementById('donationQuantity').value);
                const expiry = new Date(document.getElementById('donationExpiry').value);
                
                if (quantity <= 0) {
                    this.showNotification('Quantity must be at least 1 serving', 'error');
                    return false;
                }
                
                if (expiry <= new Date()) {
                    this.showNotification('Expiry date must be in the future', 'error');
                    return false;
                }
                
                return true;
            }

            checkPasswordStrength(password) {
                const strengthIndicator = document.getElementById('passwordStrength');
                
                if (password.length === 0) {
                    strengthIndicator.className = 'password-strength';
                    return;
                }
                
                // Simple strength calculation
                let strength = 0;
                if (password.length >= 8) strength += 1;
                if (/[A-Z]/.test(password)) strength += 1;
                if (/[0-9]/.test(password)) strength += 1;
                if (/[^A-Za-z0-9]/.test(password)) strength += 1;
                
                if (strength <= 1) {
                    strengthIndicator.className = 'password-strength password-weak';
                } else if (strength <= 2) {
                    strengthIndicator.className = 'password-strength password-medium';
                } else {
                    strengthIndicator.className = 'password-strength password-strong';
                }
            }

            // Notification Methods
            notifyVolunteers(donation) {
                const volunteers = this.db.getUsersByRole('volunteer');
                
                volunteers.forEach(volunteer => {
                    this.db.addNotification({
                        userId: volunteer.id,
                        type: 'new_donation',
                        title: 'New Donation Available',
                        message: `${donation.title} (${donation.quantity} servings) is available for pickup at ${donation.location}`,
                        donationId: donation.id
                    });
                });
                
                // Update notification badge for logged-in volunteers
                if (this.currentUser && this.currentUser.role === 'volunteer') {
                    this.updateNotificationBadge();
                }
                
                this.showNotification(`Volunteers have been notified about your donation.`, 'info');
            }

            notifyDonor(donation, claimer) {
                this.db.addNotification({
                    userId: donation.userId,
                    type: 'donation_claimed',
                    title: 'Your Donation Has Been Claimed',
                    message: `${claimer.name} has claimed your donation "${donation.title}". Proposed pickup time: ${this.formatDate(donation.pickupTime)}`,
                    donationId: donation.id
                });
                
                // Update notification badge for the donor if they're logged in
                if (this.currentUser && this.currentUser.id === donation.userId) {
                    this.updateNotificationBadge();
                }
            }

            showNotifications() {
                this.navigateTo('dashboard');
                // Mark all notifications as read when user views them
                this.db.markAllNotificationsAsRead(this.currentUser.id);
                this.updateNotificationBadge();
                this.loadVolunteerNotifications();
            }

            markNotificationAsRead(id) {
                this.db.markNotificationAsRead(id);
                this.updateNotificationBadge();
                this.loadVolunteerNotifications();
            }

            viewDonation(donationId) {
                this.navigateTo('donations');
                // In a real app, we would scroll to or highlight the specific donation
            }

            // Utility Methods
            formatNumber(num) {
                return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
            }

            formatDate(dateString) {
                const date = new Date(dateString);
                return date.toLocaleString();
            }

            showNotification(message, type = 'success') {
                const notification = document.getElementById('notification');
                const messageEl = document.getElementById('notificationMessage');
                const icon = notification.querySelector('i');

                messageEl.textContent = message;
                notification.className = 'notification';
                
                if (type === 'error') {
                    notification.classList.add('error');
                    icon.className = 'fas fa-exclamation-circle';
                } else if (type === 'warning') {
                    notification.classList.add('warning');
                    icon.className = 'fas fa-exclamation-triangle';
                } else if (type === 'info') {
                    notification.classList.add('info');
                    icon.className = 'fas fa-info-circle';
                } else {
                    icon.className = 'fas fa-check-circle';
                }

                notification.style.display = 'flex';

                setTimeout(() => {
                    notification.style.display = 'none';
                }, 3000);
            }

            toggleTheme() {
                document.body.classList.toggle('dark-mode');
                const icon = document.querySelector('#themeToggle i');
                if (document.body.classList.contains('dark-mode')) {
                    icon.className = 'fas fa-sun';
                    localStorage.setItem('theme', 'dark');
                } else {
                    icon.className = 'fas fa-moon';
                    localStorage.setItem('theme', 'light');
                }
            }

            loadTheme() {
                const savedTheme = localStorage.getItem('theme') || 'light';
                if (savedTheme === 'dark') {
                    document.body.classList.add('dark-mode');
                    document.querySelector('#themeToggle i').className = 'fas fa-sun';
                }
            }

            debounce(func, wait) {
                let timeout;
                return function executedFunction(...args) {
                    const later = () => {
                        clearTimeout(timeout);
                        func(...args);
                    };
                    clearTimeout(timeout);
                    timeout = setTimeout(later, wait);
                };
            }

            startRealTimeUpdates() {
                setInterval(() => {
                    if (this.currentUser) {
                        this.updateNotificationBadge();
                        // Refresh current page data
                        const activePage = document.querySelector('.page-section.active').id;
                        if (activePage === 'donations') this.loadDonations();
                        else if (activePage === 'requests') this.loadRequests();
                    }
                }, 30000); // Update every 30 seconds
            }

            // Global methods for dynamic content
            editDonation(id) {
                this.showNotification('Edit functionality would be implemented in production.', 'warning');
            }

            deleteDonation(id) {
                if (confirm('Are you sure you want to delete this donation?')) {
                    this.db.deleteDonation(id);
                    this.showNotification('Donation deleted successfully.');
                    this.loadDonations();
                    this.loadDashboard();
                }
            }

            editRequest(id) {
                this.showNotification('Edit functionality would be implemented in production.', 'warning');
            }

            deleteRequest(id) {
                if (confirm('Are you sure you want to delete this request?')) {
                    this.db.deleteRequest(id);
                    this.showNotification('Request deleted successfully.');
                    this.loadRequests();
                    this.loadDashboard();
                }
            }
        }

        // Initialize the application
        const app = new FoodSaveApp();

        // Make app available globally for onclick handlers
        window.app = app;
    </script>
</body>
</html>